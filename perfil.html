<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meu Perfil ‚Äî CSA</title>
  <link rel="stylesheet" href="css/variables.css">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/icons.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/home.css">
  <link rel="stylesheet" href="css/pages.css">
  <link rel="stylesheet" href="css/animations.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üå±</text></svg>">
</head>
<body>
  <div id="app-header"></div>

  <main class="page-section page-transition">
    <div class="container" id="profile-page"></div>
  </main>

  <div id="app-footer"></div>

  <script src="js/icons.js"></script>
  <script src="js/data.js"></script>
  <script src="js/app.js"></script>
  <script>
    document.getElementById('app-header').innerHTML = renderHeader('');
    document.getElementById('app-footer').innerHTML = renderFooter();
    initNotifications();

    const sections = ['dados', 'pedidos', 'cursos', 'favoritos', 'enderecos', 'config'];

    function showSection(name) {
      sections.forEach(s => {
        document.getElementById('sec-' + s).style.display = s === name ? 'block' : 'none';
      });
      document.querySelectorAll('.profile-sidebar-item').forEach((item, i) => {
        item.classList.toggle('active', sections[i] === name);
      });
    }

    function renderProfilePage() {
      const orders = [
        { id: 1042, date: '15/01/2025', status: 'Enviado', statusColor: 'badge-info', items: 3, total: 187.40 },
        { id: 1041, date: '08/01/2025', status: 'Entregue', statusColor: 'badge-green', items: 5, total: 256.80 },
        { id: 1038, date: '22/12/2024', status: 'Entregue', statusColor: 'badge-green', items: 2, total: 89.90 },
        { id: 1035, date: '10/12/2024', status: 'Entregue', statusColor: 'badge-green', items: 4, total: 178.50 },
      ];

      const progress = [75, 40, 15];
      const courses = window.COURSES.slice(0, 3);
      const favProducts = window.PRODUCTS.slice(0, 4);
      const notifSettings = ['E-mail de ofertas', 'Notifica√ß√µes push', 'Novos cursos', 'Status de pedidos'];

      document.getElementById('profile-page').innerHTML = `
      <!-- Profile Header -->
      <div class="profile-header fade-in-up">
        <div class="profile-avatar">AM</div>
        <div class="profile-info">
          <h2>Andr√© Machado</h2>
          <p>andre@email.com ¬∑ Membro desde Jan 2024</p>
          <div style="display:flex;gap:var(--space-2);margin-top:var(--space-2);">
            <span class="badge badge-green">Consumidor</span>
            <span class="badge badge-info">Verificado</span>
          </div>
        </div>
        <div class="profile-stats">
          <div class="profile-stat" data-tooltip="Total de pedidos realizados">
            <strong>12</strong><span>Pedidos</span>
          </div>
          <div class="profile-stat" data-tooltip="Cursos matriculados">
            <strong>3</strong><span>Cursos</span>
          </div>
          <div class="profile-stat" data-tooltip="Receitas salvas">
            <strong>8</strong><span>Favoritos</span>
          </div>
        </div>
      </div>

      <div class="profile-grid">
        <!-- Sidebar -->
        <div class="profile-sidebar">
          <button class="profile-sidebar-item active" onclick="showSection('dados')" data-tooltip="Informa√ß√µes pessoais">
            ${Icons.profile(18)} Meus Dados
          </button>
          <button class="profile-sidebar-item" onclick="showSection('pedidos')" data-tooltip="Hist√≥rico de pedidos">
            ${Icons.cart(18)} Meus Pedidos
          </button>
          <button class="profile-sidebar-item" onclick="showSection('cursos')" data-tooltip="Cursos em andamento">
            ${Icons.course(18)} Meus Cursos
          </button>
          <button class="profile-sidebar-item" onclick="showSection('favoritos')" data-tooltip="Itens salvos">
            ${Icons.heart(18)} Favoritos
          </button>
          <button class="profile-sidebar-item" onclick="showSection('enderecos')" data-tooltip="Endere√ßos de entrega">
            ${Icons.locationPin(18)} Endere√ßos
          </button>
          <button class="profile-sidebar-item" onclick="showSection('config')" data-tooltip="Configura√ß√µes da conta">
            ${Icons.settings(18)} Configura√ß√µes
          </button>
          <button class="profile-sidebar-item" onclick="showToast('Desconectado com sucesso!','check');setTimeout(()=>window.location.href='login.html',1000)" style="color:var(--error);" data-tooltip="Sair da conta">
            ${Icons.lock(18)} Sair
          </button>
        </div>

        <!-- Content -->
        <div id="profile-content">
          <!-- Meus Dados -->
          <div class="profile-content" id="sec-dados">
            <h3>${Icons.profile(20)} Meus Dados</h3>
            <form class="profile-form" onsubmit="event.preventDefault();showToast('Dados salvos com sucesso!','check')">
              <div class="form-group"><label>Nome</label><input type="text" value="Andr√©" placeholder="Primeiro nome"></div>
              <div class="form-group"><label>Sobrenome</label><input type="text" value="Machado" placeholder="Sobrenome"></div>
              <div class="form-group"><label>E-mail</label><input type="email" value="andre@email.com" placeholder="E-mail"></div>
              <div class="form-group"><label>Telefone</label><input type="tel" value="(11) 99999-9999" placeholder="Telefone"></div>
              <div class="form-group"><label>CPF</label><input type="text" value="***.***.***-00" placeholder="CPF"></div>
              <div class="form-group"><label>Data de Nascimento</label><input type="date" value="1990-01-15"></div>
              <div class="form-group full">
                <label>Bio</label>
                <textarea style="padding:var(--space-3);border:1px solid var(--border-light);border-radius:var(--radius-md);min-height:80px;resize:vertical;" placeholder="Conte um pouco sobre voc√™...">Apaixonado por agricultura sustent√°vel e alimenta√ß√£o saud√°vel. Consumidor CSA desde 2024.</textarea>
              </div>
              <div class="form-group full" style="display:flex;flex-direction:row;justify-content:flex-end;gap:var(--space-3);">
                <button type="button" class="btn btn-ghost">Cancelar</button>
                <button type="submit" class="btn btn-primary">${Icons.check(16)} Salvar Altera√ß√µes</button>
              </div>
            </form>
          </div>

          <!-- Meus Pedidos -->
          <div class="profile-content" id="sec-pedidos" style="display:none;">
            <h3>${Icons.cart(20)} Meus Pedidos</h3>
            <div style="display:flex;flex-direction:column;gap:var(--space-4);">
              ${orders.map(o => `
                <div style="display:flex;justify-content:space-between;align-items:center;padding:var(--space-4);background:var(--surface);border-radius:var(--radius-md);">
                  <div>
                    <strong style="font-size:var(--font-size-sm);">Pedido #${o.id}</strong>
                    <p style="font-size:var(--font-size-xs);color:var(--text-muted);">${o.date} ¬∑ ${o.items} itens</p>
                  </div>
                  <span class="badge ${o.statusColor}">${o.status}</span>
                  <strong style="color:var(--green-dark);">${formatBRL(o.total)}</strong>
                </div>
              `).join('')}
            </div>
          </div>

          <!-- Meus Cursos -->
          <div class="profile-content" id="sec-cursos" style="display:none;">
            <h3>${Icons.course(20)} Meus Cursos</h3>
            <div style="display:flex;flex-direction:column;gap:var(--space-4);">
              ${courses.map((c, i) => `
                <div style="display:flex;gap:var(--space-4);align-items:center;padding:var(--space-4);background:var(--surface);border-radius:var(--radius-md);">
                  <div style="width:60px;height:60px;border-radius:var(--radius-md);background:var(--green-light);display:flex;align-items:center;justify-content:center;">
                    ${Icons[c.icon](28)}
                  </div>
                  <div style="flex:1;">
                    <strong style="font-size:var(--font-size-sm);">${c.title}</strong>
                    <p style="font-size:var(--font-size-xs);color:var(--text-muted);">${c.instructor} ¬∑ ${c.modules} m√≥dulos</p>
                    <div style="height:4px;background:var(--border-light);border-radius:2px;margin-top:var(--space-2);overflow:hidden;">
                      <div style="height:100%;background:var(--green-primary);border-radius:2px;width:${progress[i]}%;"></div>
                    </div>
                  </div>
                  <span class="badge badge-green">${progress[i]}%</span>
                </div>
              `).join('')}
            </div>
          </div>

          <!-- Favoritos -->
          <div class="profile-content" id="sec-favoritos" style="display:none;">
            <h3>${Icons.heart(20)} Favoritos</h3>
            <div class="grid grid-2" style="gap:var(--space-4);">
              ${favProducts.map(p => `
                <div style="display:flex;gap:var(--space-3);padding:var(--space-3);background:var(--surface);border-radius:var(--radius-md);align-items:center;">
                  <div style="width:50px;height:50px;border-radius:var(--radius-md);background:var(--green-light);display:flex;align-items:center;justify-content:center;flex-shrink:0;">
                    ${Icons[p.icon](24)}
                  </div>
                  <div style="flex:1;min-width:0;">
                    <a href="produto.html?id=${p.id}" style="font-size:var(--font-size-sm);font-weight:600;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">${p.name}</a>
                    <span style="font-size:var(--font-size-xs);color:var(--green-dark);font-weight:700;">${formatBRL(p.price)}</span>
                  </div>
                  <button class="btn btn-ghost btn-sm" onclick="showToast('Removido dos favoritos','trash')" data-tooltip="Remover">${Icons.close(14)}</button>
                </div>
              `).join('')}
            </div>
          </div>

          <!-- Endere√ßos -->
          <div class="profile-content" id="sec-enderecos" style="display:none;">
            <h3>${Icons.locationPin(20)} Endere√ßos</h3>
            <div style="display:flex;flex-direction:column;gap:var(--space-4);">
              <div style="padding:var(--space-4);border:2px solid var(--green-primary);border-radius:var(--radius-md);background:var(--green-light);">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-2);">
                  <strong style="font-size:var(--font-size-sm);">Casa (Principal)</strong>
                  <span class="badge badge-green">Padr√£o</span>
                </div>
                <p style="font-size:var(--font-size-sm);color:var(--text-muted);">Rua das Flores, 123 - Jardim Primavera<br>Campinas - SP, 13090-000</p>
              </div>
              <div style="padding:var(--space-4);border:1px solid var(--border-light);border-radius:var(--radius-md);">
                <strong style="font-size:var(--font-size-sm);">Trabalho</strong>
                <p style="font-size:var(--font-size-sm);color:var(--text-muted);margin-top:var(--space-1);">Av. Paulista, 1000 - Bela Vista<br>S√£o Paulo - SP, 01310-100</p>
              </div>
              <button class="btn btn-outline" onclick="showToast('Funcionalidade em breve!','info')">
                ${Icons.plus(16)} Adicionar Endere√ßo
              </button>
            </div>
          </div>

          <!-- Configura√ß√µes -->
          <div class="profile-content" id="sec-config" style="display:none;">
            <h3>${Icons.settings(20)} Configura√ß√µes</h3>
            <div style="display:flex;flex-direction:column;gap:var(--space-6);">
              <div>
                <h4 style="font-size:var(--font-size-base);margin-bottom:var(--space-3);">Notifica√ß√µes</h4>
                ${notifSettings.map(n => `
                  <label style="display:flex;align-items:center;justify-content:space-between;padding:var(--space-3) 0;border-bottom:1px solid var(--border-light);font-size:var(--font-size-sm);cursor:pointer;">
                    ${n}
                    <input type="checkbox" checked style="width:18px;height:18px;accent-color:var(--green-primary);">
                  </label>
                `).join('')}
              </div>
              <div>
                <h4 style="font-size:var(--font-size-base);margin-bottom:var(--space-3);">Seguran√ßa</h4>
                <button class="btn btn-outline btn-sm" onclick="showToast('Link de redefini√ß√£o enviado ao email!','check')">Alterar Senha</button>
              </div>
              <div>
                <h4 style="font-size:var(--font-size-base);margin-bottom:var(--space-3);color:var(--error);">Zona de Perigo</h4>
                <button class="btn btn-ghost btn-sm" style="color:var(--error);border:1px solid var(--error);" onclick="showToast('Conta desativada (simula√ß√£o)','trash')">Desativar Conta</button>
              </div>
            </div>
          </div>
        </div>
      </div>`;

      setTimeout(initScrollAnimations, 100);
    }

    renderProfilePage();
  </script>
</body>
</html>
